---

promtail_main_version: "{{ promtail_version[0:3] }}"

promtail_install_path: /usr/local/bin/promtail/{{ promtail_version }}

promtail_delegate_to: localhost

promtail_local_tmp_directory: "{{
  lookup('env', 'CUSTOM_LOCAL_TMP_DIRECTORY') |
  default(lookup('env', 'HOME') ~ '/.cache/ansible/promtail', true) }}/{{ promtail_version }}"

promtail_packages:
  - promtail

promtail_requirements:
  - iproute2

promtail_defaults_server:
  http_listen_address: "127.0.0.1"
  http_listen_port: 9080
  grpc_listen_address: "127.0.0.1"
  grpc_listen_port: 0
  # [debug, info, warn, error] (default info)
  log_level: info

promtail_defaults_clients: []
#  - url: "http://127.0.0.1:3100/loki/api/v1/push"

promtail_defaults_positions:
  filename: "{{ promtail_storage_dir }}/positions.yml"

promtail_defaults_targets:
  sync_period: "10s"


go_arch_map:
  x86_64: 'amd64'
  aarch64: 'arm64'
  armv7l: 'armv7'
  armv6l: 'armv6'

go_arch: "{{ go_arch_map[ansible_architecture] | default(ansible_architecture) }}"

systemd_lib_directory: /lib/systemd/system

...
